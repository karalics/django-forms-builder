{% extends "admin/base_site.html" %}
{% load i18n %}

{% block extrahead %}
{{ block.super }}
<style>
#content-main table {margin:10px 0 20px 0;}
#content-main ul, #content-main li {display:inline; padding:0;}
#content-main label {cursor:pointer;}
h1 {margin-top:20px;}
#content-main h1 {margin:30px 0 0 0;}
table {border:2px solid #ddd; width:100%;}
thead {background:#f0f0f0;}
th, td {border:1px solid #ddd; padding:5px 15px;}
.last {border-right:0;}
td.include, th.include-all, td.include-all {text-align:center; width:10px;}
.empty {margin-top:10px;}
.field {padding-top:8px;}
.filter select {width:140px;}
.options {vertical-align:middle; white-space:nowrap;}
.options label {margin:0 10px; font-weight:normal; vertical-align:middle;}
.options-div {visibility:hidden;}
.options select {min-width:0;}
.on {background:#eee;}
.off {background:#fff;}
.button {float:left !important; margin-right:10px; cursor:pointer; margin-right:10px !important;}
</style>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
<script>
$(function() {
    // Show the filter criteria fields when a filter option is selected.
    $('.filter select').change(function() {
        var filtering = this.selectedIndex > 0;
        var options = $(this).parent().parent().find('.options-div');
        options.css('visibility', filtering ? 'visible' : 'hidden');
        // Focus the first field.
        if (filtering) {
            var input = options.find('input:first');
            if (input.length === 1) {
                input.focus();
            } else {
                options.find('select:first').focus();
            }
        }
    }).change();
    // Toggle the include `All` checkboxes - grouped within table tags.
    $('#content-main table').each(function(i, table) {
        table = $(table);
        var all = table.find('.include-all :checkbox');
        var others = table.find('.include :checkbox');
        others.change(function() {
            var len = table.find('.include :checkbox:not(:checked)').length;
            all.attr('checked', len === 0);
        });
        all.change(function() {
            others.attr('checked', !!all.attr('checked'));
        });
    });
    // Add a confirmation prompt for deleting entries.
    $('input[name="delete"]').click(function() {
        if ( $('input[name="selected"]:checked').length === 0 ) {
            alert('{% trans "No entries selected" %}');
            return false;
        } else {
            return confirm('{% trans "Delete selected entries?" %}');
        }
    });
});
</script>
{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs">
     <a href="../../../../">{% trans "Home" %}</a> &rsaquo;
     <a href="../../../">{{ opts.app_label|capfirst|escape }}</a> &rsaquo;
     <a href="../../">{{ opts.verbose_name_plural|capfirst }}</a> &rsaquo;
     <a href="../">{{ original|truncatewords:"18" }}</a> &rsaquo;
     {{ title }}
</div>
{% endblock %}

{% block content %}
<div id="content-main">
    <h1>{% trans "Entries for" %} {{ original.title }}</h1>
    {% if entries %}
    <table>
        <thead>
            <tr>
                {% for key in entries.0.data.keys %}
                <th>{{ key }}</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for entry in entries %}
            <tr>
                {% for value in entry.data.values %}
                <td>{{ value }}</td>
                {% endfor %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p class="empty">{% trans "No entries found." %}</p>
    {% endif %}
</div>
{% endblock %}